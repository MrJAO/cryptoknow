{"ast":null,"code":"import { supabase } from \"../supabaseClient\"; // Adjust path if needed\n\nexport const subscribeToAirdrops = setAirdrops => {\n  // Fetch initial data\n  const fetchAirdrops = async () => {\n    const {\n      data,\n      error\n    } = await supabase.from(\"Available Airdrops\").select(\"*\");\n    if (error) console.error(\"Error fetching airdrops:\", error);else setAirdrops(data);\n  };\n  fetchAirdrops();\n\n  // Subscribe to real-time updates\n  const subscription = supabase.from(\"Available Airdrops\").on(\"INSERT\", payload => {\n    console.log(\"New airdrop received:\", payload);\n    setAirdrops(prev => [...prev, payload.new]);\n  }).subscribe();\n  return () => {\n    subscription.unsubscribe();\n  };\n};","map":{"version":3,"names":["supabase","subscribeToAirdrops","setAirdrops","fetchAirdrops","data","error","from","select","console","subscription","on","payload","log","prev","new","subscribe","unsubscribe"],"sources":["C:/Users/opril/cryptoknow/src/utils/supabaseSubscription.js"],"sourcesContent":["import { supabase } from \"../supabaseClient\"; // Adjust path if needed\r\n\r\nexport const subscribeToAirdrops = (setAirdrops) => {\r\n  // Fetch initial data\r\n  const fetchAirdrops = async () => {\r\n    const { data, error } = await supabase.from(\"Available Airdrops\").select(\"*\");\r\n    if (error) console.error(\"Error fetching airdrops:\", error);\r\n    else setAirdrops(data);\r\n  };\r\n\r\n  fetchAirdrops();\r\n\r\n  // Subscribe to real-time updates\r\n  const subscription = supabase\r\n    .from(\"Available Airdrops\")\r\n    .on(\"INSERT\", (payload) => {\r\n      console.log(\"New airdrop received:\", payload);\r\n      setAirdrops((prev) => [...prev, payload.new]);\r\n    })\r\n    .subscribe();\r\n\r\n  return () => {\r\n    subscription.unsubscribe();\r\n  };\r\n};\r\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,mBAAmB,CAAC,CAAC;;AAE9C,OAAO,MAAMC,mBAAmB,GAAIC,WAAW,IAAK;EAClD;EACA,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,oBAAoB,CAAC,CAACC,MAAM,CAAC,GAAG,CAAC;IAC7E,IAAIF,KAAK,EAAEG,OAAO,CAACH,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC,CAAC,KACvDH,WAAW,CAACE,IAAI,CAAC;EACxB,CAAC;EAEDD,aAAa,CAAC,CAAC;;EAEf;EACA,MAAMM,YAAY,GAAGT,QAAQ,CAC1BM,IAAI,CAAC,oBAAoB,CAAC,CAC1BI,EAAE,CAAC,QAAQ,EAAGC,OAAO,IAAK;IACzBH,OAAO,CAACI,GAAG,CAAC,uBAAuB,EAAED,OAAO,CAAC;IAC7CT,WAAW,CAAEW,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEF,OAAO,CAACG,GAAG,CAAC,CAAC;EAC/C,CAAC,CAAC,CACDC,SAAS,CAAC,CAAC;EAEd,OAAO,MAAM;IACXN,YAAY,CAACO,WAAW,CAAC,CAAC;EAC5B,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}