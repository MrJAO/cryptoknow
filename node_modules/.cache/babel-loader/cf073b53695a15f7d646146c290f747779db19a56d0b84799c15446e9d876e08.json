{"ast":null,"code":"import React,{useEffect,useState}from'react';import{supabase}from'../../supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ToDoItem=_ref=>{let{task,onDelete,onMarkDone,doneTasks,isEven,finishedTasks}=_ref;const[isDisabled,setIsDisabled]=useState(false);const isDone=doneTasks[task.id]||false;useEffect(()=>{if(finishedTasks[task.project_name]){// Fix: Check existence in object\nsetIsDisabled(true);}},[finishedTasks,task.project_name]);const handleCheckboxToggle=()=>{if(!isDisabled){onMarkDone(task.id,!isDone);}};const handleDelete=async()=>{if(window.confirm(`Are you sure you want to remove \"${task.project_name}\"?`)){// Fetch the user's Discord username\nconst{data:userData,error:userError}=await supabase.from('to_do_list').select('discord_username').eq('id',task.id).single();if(userError||!userData){console.error(\"Error fetching user data:\",userError===null||userError===void 0?void 0:userError.message);alert(\"Failed to retrieve user data. Try again.\");return;}const discordUsername=userData.discord_username;// Delete all entries with the same project_name and discord_username\nconst{error}=await supabase.from('to_do_list').delete().eq('project_name',task.project_name).eq('discord_username',discordUsername);if(!error){onDelete(task.id);}else{console.error(\"Error deleting task:\",error.message);alert(\"Failed to delete task. Try again.\");}}};return/*#__PURE__*/_jsxs(\"tr\",{className:`${isEven?'bg-gray-100':'bg-white'} hover:bg-gray-200 transition duration-200`,children:[/*#__PURE__*/_jsxs(\"td\",{className:\"border p-3 flex items-center space-x-3\",children:[isDisabled?/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500 font-semibold\",children:\"\\u2714 Done\"}):/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isDone,onChange:handleCheckboxToggle,className:\"w-5 h-5 cursor-pointer accent-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:`text-gray-800 ${isDone||isDisabled?'line-through text-gray-500':''}`,children:task.project_name})]}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-3\",children:/*#__PURE__*/_jsx(\"a\",{href:task.task_link,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-500 hover:underline font-medium\",children:\"View Task\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-3 text-gray-700\",children:task.chain}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-3 text-gray-700\",children:task.airdrop_type}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-3 text-gray-700\",children:task.device_needed}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-3 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,className:\"bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition duration-200 shadow-md\",children:\"\\u2716\"})})]});};export default ToDoItem;","map":{"version":3,"names":["React","useEffect","useState","supabase","jsx","_jsx","jsxs","_jsxs","ToDoItem","_ref","task","onDelete","onMarkDone","doneTasks","isEven","finishedTasks","isDisabled","setIsDisabled","isDone","id","project_name","handleCheckboxToggle","handleDelete","window","confirm","data","userData","error","userError","from","select","eq","single","console","message","alert","discordUsername","discord_username","delete","className","children","type","checked","onChange","href","task_link","target","rel","chain","airdrop_type","device_needed","onClick"],"sources":["C:/Users/opril/cryptoknow/src/components/ToDoList/ToDoItem.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { supabase } from '../../supabaseClient';\r\n\r\nconst ToDoItem = ({ task, onDelete, onMarkDone, doneTasks, isEven, finishedTasks }) => {\r\n  const [isDisabled, setIsDisabled] = useState(false);\r\n  const isDone = doneTasks[task.id] || false;\r\n\r\n  useEffect(() => {\r\n    if (finishedTasks[task.project_name]) { // Fix: Check existence in object\r\n      setIsDisabled(true);\r\n    }\r\n  }, [finishedTasks, task.project_name]);\r\n\r\n  const handleCheckboxToggle = () => {\r\n    if (!isDisabled) {\r\n      onMarkDone(task.id, !isDone);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (window.confirm(`Are you sure you want to remove \"${task.project_name}\"?`)) {\r\n      // Fetch the user's Discord username\r\n      const { data: userData, error: userError } = await supabase\r\n        .from('to_do_list')\r\n        .select('discord_username')\r\n        .eq('id', task.id)\r\n        .single();\r\n\r\n      if (userError || !userData) {\r\n        console.error(\"Error fetching user data:\", userError?.message);\r\n        alert(\"Failed to retrieve user data. Try again.\");\r\n        return;\r\n      }\r\n\r\n      const discordUsername = userData.discord_username;\r\n      \r\n      // Delete all entries with the same project_name and discord_username\r\n      const { error } = await supabase\r\n        .from('to_do_list')\r\n        .delete()\r\n        .eq('project_name', task.project_name)\r\n        .eq('discord_username', discordUsername);\r\n\r\n      if (!error) {\r\n        onDelete(task.id);\r\n      } else {\r\n        console.error(\"Error deleting task:\", error.message);\r\n        alert(\"Failed to delete task. Try again.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <tr className={`${isEven ? 'bg-gray-100' : 'bg-white'} hover:bg-gray-200 transition duration-200`}>\r\n      <td className=\"border p-3 flex items-center space-x-3\">\r\n        {isDisabled ? (\r\n          <span className=\"text-green-500 font-semibold\">✔ Done</span>\r\n        ) : (\r\n          <input \r\n            type=\"checkbox\" \r\n            checked={isDone} \r\n            onChange={handleCheckboxToggle} \r\n            className=\"w-5 h-5 cursor-pointer accent-blue-500\"\r\n          />\r\n        )}\r\n        <span className={`text-gray-800 ${isDone || isDisabled ? 'line-through text-gray-500' : ''}`}>\r\n          {task.project_name}\r\n        </span>\r\n      </td>\r\n      <td className=\"border p-3\">\r\n        <a \r\n          href={task.task_link} \r\n          target=\"_blank\" \r\n          rel=\"noopener noreferrer\" \r\n          className=\"text-blue-500 hover:underline font-medium\"\r\n        >\r\n          View Task\r\n        </a>\r\n      </td>\r\n      <td className=\"border p-3 text-gray-700\">{task.chain}</td>\r\n      <td className=\"border p-3 text-gray-700\">{task.airdrop_type}</td>\r\n      <td className=\"border p-3 text-gray-700\">{task.device_needed}</td>\r\n      <td className=\"border p-3 text-center\">\r\n        <button \r\n          onClick={handleDelete} \r\n          className=\"bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition duration-200 shadow-md\"\r\n        >\r\n          ✖\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default ToDoItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}