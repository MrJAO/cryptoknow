{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\opril\\\\cryptoknow\\\\src\\\\components\\\\ToDoList\\\\ToDoItem.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { supabase } from '../../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ToDoItem = ({\n  task,\n  onDelete,\n  onMarkDone,\n  doneTasks,\n  isEven,\n  finishedTasks\n}) => {\n  _s();\n  const [isDisabled, setIsDisabled] = useState(false);\n  const isDone = doneTasks[task.id] || false;\n  useEffect(() => {\n    if (finishedTasks[task.project_name]) {\n      // Fix: Check existence in object\n      setIsDisabled(true);\n    }\n  }, [finishedTasks, task.project_name]);\n  const handleCheckboxToggle = () => {\n    if (!isDisabled) {\n      onMarkDone(task.id, !isDone);\n    }\n  };\n  const handleDelete = async () => {\n    if (window.confirm(`Are you sure you want to remove \"${task.project_name}\"?`)) {\n      // Fetch the user's Discord username\n      const {\n        data: userData,\n        error: userError\n      } = await supabase.from('to_do_list').select('discord_username').eq('id', task.id).single();\n      if (userError || !userData) {\n        console.error(\"Error fetching user data:\", userError === null || userError === void 0 ? void 0 : userError.message);\n        alert(\"Failed to retrieve user data. Try again.\");\n        return;\n      }\n      const discordUsername = userData.discord_username;\n\n      // Delete all entries with the same project_name and discord_username\n      const {\n        error\n      } = await supabase.from('to_do_list').delete().eq('project_name', task.project_name).eq('discord_username', discordUsername);\n      if (!error) {\n        onDelete(task.id);\n      } else {\n        console.error(\"Error deleting task:\", error.message);\n        alert(\"Failed to delete task. Try again.\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"tr\", {\n    className: `${isEven ? 'bg-gray-100' : 'bg-white'} hover:bg-gray-200 transition duration-200`,\n    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"border p-3 flex items-center space-x-3\",\n      children: [isDisabled ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-green-500 font-semibold\",\n        children: \"\\u2714 Done\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"checkbox\",\n        checked: isDone,\n        onChange: handleCheckboxToggle,\n        className: \"w-5 h-5 cursor-pointer accent-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `text-gray-800 ${isDone || isDisabled ? 'line-through text-gray-500' : ''}`,\n        children: task.project_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"border p-3\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: task.task_link,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"text-blue-500 hover:underline font-medium\",\n        children: \"View Task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"border p-3 text-gray-700\",\n      children: task.chain\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"border p-3 text-gray-700\",\n      children: task.airdrop_type\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"border p-3 text-gray-700\",\n      children: task.device_needed\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n      className: \"border p-3 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDelete,\n        className: \"bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition duration-200 shadow-md\",\n        children: \"\\u2716\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(ToDoItem, \"6k4K8ctpna5Pr8r+lGkn3KYfAws=\");\n_c = ToDoItem;\nexport default ToDoItem;\nvar _c;\n$RefreshReg$(_c, \"ToDoItem\");","map":{"version":3,"names":["React","useEffect","useState","supabase","jsxDEV","_jsxDEV","ToDoItem","task","onDelete","onMarkDone","doneTasks","isEven","finishedTasks","_s","isDisabled","setIsDisabled","isDone","id","project_name","handleCheckboxToggle","handleDelete","window","confirm","data","userData","error","userError","from","select","eq","single","console","message","alert","discordUsername","discord_username","delete","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","checked","onChange","href","task_link","target","rel","chain","airdrop_type","device_needed","onClick","_c","$RefreshReg$"],"sources":["C:/Users/opril/cryptoknow/src/components/ToDoList/ToDoItem.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { supabase } from '../../supabaseClient';\r\n\r\nconst ToDoItem = ({ task, onDelete, onMarkDone, doneTasks, isEven, finishedTasks }) => {\r\n  const [isDisabled, setIsDisabled] = useState(false);\r\n  const isDone = doneTasks[task.id] || false;\r\n\r\n  useEffect(() => {\r\n    if (finishedTasks[task.project_name]) { // Fix: Check existence in object\r\n      setIsDisabled(true);\r\n    }\r\n  }, [finishedTasks, task.project_name]);\r\n\r\n  const handleCheckboxToggle = () => {\r\n    if (!isDisabled) {\r\n      onMarkDone(task.id, !isDone);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (window.confirm(`Are you sure you want to remove \"${task.project_name}\"?`)) {\r\n      // Fetch the user's Discord username\r\n      const { data: userData, error: userError } = await supabase\r\n        .from('to_do_list')\r\n        .select('discord_username')\r\n        .eq('id', task.id)\r\n        .single();\r\n\r\n      if (userError || !userData) {\r\n        console.error(\"Error fetching user data:\", userError?.message);\r\n        alert(\"Failed to retrieve user data. Try again.\");\r\n        return;\r\n      }\r\n\r\n      const discordUsername = userData.discord_username;\r\n      \r\n      // Delete all entries with the same project_name and discord_username\r\n      const { error } = await supabase\r\n        .from('to_do_list')\r\n        .delete()\r\n        .eq('project_name', task.project_name)\r\n        .eq('discord_username', discordUsername);\r\n\r\n      if (!error) {\r\n        onDelete(task.id);\r\n      } else {\r\n        console.error(\"Error deleting task:\", error.message);\r\n        alert(\"Failed to delete task. Try again.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <tr className={`${isEven ? 'bg-gray-100' : 'bg-white'} hover:bg-gray-200 transition duration-200`}>\r\n      <td className=\"border p-3 flex items-center space-x-3\">\r\n        {isDisabled ? (\r\n          <span className=\"text-green-500 font-semibold\">✔ Done</span>\r\n        ) : (\r\n          <input \r\n            type=\"checkbox\" \r\n            checked={isDone} \r\n            onChange={handleCheckboxToggle} \r\n            className=\"w-5 h-5 cursor-pointer accent-blue-500\"\r\n          />\r\n        )}\r\n        <span className={`text-gray-800 ${isDone || isDisabled ? 'line-through text-gray-500' : ''}`}>\r\n          {task.project_name}\r\n        </span>\r\n      </td>\r\n      <td className=\"border p-3\">\r\n        <a \r\n          href={task.task_link} \r\n          target=\"_blank\" \r\n          rel=\"noopener noreferrer\" \r\n          className=\"text-blue-500 hover:underline font-medium\"\r\n        >\r\n          View Task\r\n        </a>\r\n      </td>\r\n      <td className=\"border p-3 text-gray-700\">{task.chain}</td>\r\n      <td className=\"border p-3 text-gray-700\">{task.airdrop_type}</td>\r\n      <td className=\"border p-3 text-gray-700\">{task.device_needed}</td>\r\n      <td className=\"border p-3 text-center\">\r\n        <button \r\n          onClick={handleDelete} \r\n          className=\"bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition duration-200 shadow-md\"\r\n        >\r\n          ✖\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default ToDoItem;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}